<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership Page Template - Green Energy Members</title>
    <style>
        :root {
            --primary-green: #2E7D32;
            --secondary-green: #4CAF50;
            --accent-green: #81C784;
            --light-green: #E8F5E8;
            --dark-green: #1B5E20;
            --white: #FFFFFF;
            --gray: #757575;
            --light-gray: #F5F5F5;
            --border: #E0E0E0;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #ffffff;
            background: linear-gradient(135deg, #0D4A0D 0%, #1B5E20 25%, #2E7D32 50%, #1B5E20 75%, #0D4A0D 100%);
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
        }

        /* Background Image Overlay - Solar Solutions */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../product-placement/Solar solutions.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.5;
            z-index: -1;
            pointer-events: none;
        }

        /* Dark overlay for better text readability */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -2;
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            box-shadow: var(--glass-shadow);
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .access-control {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--glass-shadow);
            text-align: center;
            color: var(--white);
        }

        .tier-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 10px;
        }

        .tier-free { background: #e3f2fd; color: #1976d2; }
        .tier-premium { background: #f3e5f5; color: #7b1fa2; }
        .tier-professional { background: #e8f5e8; color: #2e7d32; }
        .tier-enterprise { background: #fff3e0; color: #f57c00; }

        .upgrade-prompt {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 152, 0, 0.2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            box-shadow: var(--glass-shadow);
        }

        .upgrade-prompt h3 {
            margin-bottom: 10px;
        }

        .upgrade-prompt .btn {
            background: white;
            color: #f57c00;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .content-section {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            padding: 35px;
            border-radius: 20px;
            box-shadow: var(--glass-shadow);
            margin-bottom: 30px;
            color: var(--white);
        }

        .content-section h2 {
            color: var(--secondary-green);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .content-section h3 {
            color: var(--accent-green);
            margin: 25px 0 15px 0;
            font-size: 1.3rem;
        }

        .content-section p {
            margin-bottom: 15px;
            line-height: 1.7;
        }

        .content-section ul, .content-section ol {
            margin: 15px 0 15px 30px;
        }

        .content-section li {
            margin-bottom: 8px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .info-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid var(--secondary-green);
            box-shadow: var(--glass-shadow);
            color: var(--white);
        }

        .info-card h4 {
            color: var(--secondary-green);
            margin-bottom: 10px;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
            color: var(--white);
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3);
        }

        .btn.secondary {
            background: var(--gray);
        }

        .btn.secondary:hover {
            background: #616161;
        }

        .navigation {
            text-align: center;
            margin: 30px 0;
        }

        .navigation a {
            color: var(--white);
            text-decoration: none;
            font-weight: 600;
            padding: 12px 25px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: var(--glass-shadow);
        }

        .navigation a:hover {
            background: rgba(46, 125, 50, 0.3);
            border-color: var(--secondary-green);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .calculator-section {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: var(--glass-shadow);
            color: var(--white);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            font-size: 16px;
            color: var(--white);
            transition: all 0.3s ease;
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--secondary-green);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .results {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 4px solid var(--secondary-green);
            box-shadow: var(--glass-shadow);
            color: var(--white);
        }

        .results h4 {
            color: var(--secondary-green);
            margin-bottom: 15px;
        }

        .hidden {
            display: none;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: var(--gray);
        }

        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary-green);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation a {
                display: block;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page Header -->
        <div class="header">
            <h1>üåû Solar Energy Solutions</h1>
            <p>Comprehensive guide to solar energy assessment and implementation</p>
        </div>

        <!-- Access Control Section -->
        <div class="access-control">
            <h3>Access Level Required</h3>
            <span class="tier-badge tier-premium">Premium Tier</span>
            <p>This content is available to Premium, Professional, and Enterprise members.</p>
        </div>

        <!-- Upgrade Prompt (shown for Free tier users) -->
        <div class="upgrade-prompt hidden" id="upgrade-prompt">
            <h3>üîí Premium Content</h3>
            <p>This advanced solar energy content is available to Premium members and above.</p>
            <button class="btn" onclick="showUpgradeOptions()">View Upgrade Options</button>
        </div>

        <!-- Main Content Section -->
        <div class="content-section" id="main-content">
            <!-- Solar Energy Overview -->
            <h2>Solar Energy Assessment</h2>
            <p>Solar energy is one of the most effective ways to reduce your building's carbon footprint and energy costs. This comprehensive guide will help you assess your solar potential and plan your implementation.</p>

            <!-- Key Benefits -->
            <h3>Key Benefits of Solar Energy</h3>
            <div class="info-grid">
                <div class="info-card">
                    <h4>üí∂ Cost Savings</h4>
                    <p>Reduce electricity bills by 50-90% depending on system size and energy usage patterns.</p>
                </div>
                <div class="info-card">
                    <h4>üå± Environmental Impact</h4>
                    <p>Significantly reduce carbon footprint and contribute to sustainability goals.</p>
                </div>
                <div class="info-card">
                    <h4>üìà Property Value</h4>
                    <p>Increase property value by 3-4% on average with solar installation.</p>
                </div>
                <div class="info-card">
                    <h4>üîã Energy Independence</h4>
                    <p>Reduce dependence on grid electricity and protect against price fluctuations.</p>
                </div>
            </div>

            <!-- Solar Calculator Section -->
            <div class="calculator-section">
                <h3>Solar Potential Calculator</h3>
                <p>Calculate your building's solar potential and estimated savings:</p>
                
                <div class="form-group">
                    <label for="roof-area">Roof Area (sq ft)</label>
                    <input type="number" id="roof-area" placeholder="Enter roof area">
                </div>
                
                <div class="form-group">
                    <label for="sunlight-hours">Daily Sunlight Hours</label>
                    <select id="sunlight-hours">
                        <option value="">Select your location</option>
                        <option value="4">Northern Regions (4 hours)</option>
                        <option value="5">Central Regions (5 hours)</option>
                        <option value="6">Southern Regions (6 hours)</option>
                        <option value="7">Desert Regions (7 hours)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="electricity-cost">Current Electricity Cost ($/kWh)</label>
                    <input type="number" id="electricity-cost" step="0.01" placeholder="0.12">
                </div>
                
                <button class="btn" onclick="calculateSolarPotential()">Calculate Solar Potential</button>
                
                <div class="results hidden" id="solar-results">
                    <h4>Solar Potential Results</h4>
                    <div id="results-content"></div>
                </div>
            </div>

            <!-- Implementation Guide -->
            <h3>Implementation Steps</h3>
            <ol>
                <li><strong>Site Assessment:</strong> Evaluate roof condition, orientation, and shading</li>
                <li><strong>Energy Audit:</strong> Analyze current energy consumption patterns</li>
                <li><strong>System Design:</strong> Determine optimal panel configuration and inverter type</li>
                <li><strong>Permits & Approvals:</strong> Obtain necessary building and utility permits</li>
                <li><strong>Installation:</strong> Professional installation by certified contractors</li>
                <li><strong>Monitoring:</strong> Set up energy monitoring and maintenance schedule</li>
            </ol>

            <!-- Cost Analysis -->
            <h3>Cost Analysis & ROI</h3>
            <p>Solar installations typically have:</p>
            <ul>
                <li><strong>Payback Period:</strong> 6-12 years depending on location and incentives</li>
                <li><strong>System Lifespan:</strong> 25-30 years with minimal maintenance</li>
                <li><strong>Incentives Available:</strong> Federal tax credits, state rebates, utility programs</li>
                <li><strong>Financing Options:</strong> Cash purchase, loans, leases, power purchase agreements</li>
            </ul>

            <!-- Action Buttons -->
            <div style="text-align: center; margin: 30px 0;">
                <button class="btn" onclick="downloadSolarGuide()">üì• Download Complete Guide</button>
                <button class="btn secondary" onclick="scheduleConsultation()">üìÖ Schedule Consultation</button>
                <button class="btn secondary" onclick="viewCaseStudies()">üìä View Case Studies</button>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <a href="members-section.html">‚Üê Back to Dashboard</a>
            <a href="content-manager.html">üìö All Content</a>
            <a href="#" onclick="manageSubscription()">‚öôÔ∏è Manage Subscription</a>
        </div>
    </div>

    <script>
        // Configuration - Auto-detect production vs development
        const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:4000'
            : window.location.origin;
        const REQUIRED_TIER = 'Premium'; // Change this for different pages
        const PAGE_TITLE = 'Solar Energy Solutions'; // Change this for different pages

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkAccessLevel();
            loadUserInfo();
        });

        // Check user access level
        function checkAccessLevel() {
            const userTier = getCurrentUserTier();
            const tierHierarchy = ['Free', 'Premium', 'Professional', 'Enterprise'];
            
            const userTierIndex = tierHierarchy.indexOf(userTier);
            const requiredTierIndex = tierHierarchy.indexOf(REQUIRED_TIER);
            
            if (userTierIndex < requiredTierIndex) {
                // User doesn't have access
                document.getElementById('main-content').classList.add('hidden');
                document.getElementById('upgrade-prompt').classList.remove('hidden');
            } else {
                // User has access
                document.getElementById('main-content').classList.remove('hidden');
                document.getElementById('upgrade-prompt').classList.add('hidden');
            }
        }

        // Get current user tier
        function getCurrentUserTier() {
            // Try to get from localStorage first
            const storedTier = localStorage.getItem('user_tier');
            if (storedTier) {
                return storedTier;
            }
            
            // Try to get from current user object
            const currentUser = JSON.parse(localStorage.getItem('current_user') || '{}');
            if (currentUser.subscription_tier) {
                return currentUser.subscription_tier;
            }
            
            // Default to Free if not logged in
            return 'Free';
        }

        // Load user info
        function loadUserInfo() {
            const currentUser = JSON.parse(localStorage.getItem('current_user') || '{}');
            if (currentUser.first_name) {
                // Update page title with user's name
                document.title = `${PAGE_TITLE} - Welcome ${currentUser.first_name}`;
            }
        }

        // Solar calculation function
        function calculateSolarPotential() {
            const roofArea = parseFloat(document.getElementById('roof-area').value);
            const sunlightHours = parseFloat(document.getElementById('sunlight-hours').value);
            const electricityCost = parseFloat(document.getElementById('electricity-cost').value) || 0.12;
            
            if (!roofArea || !sunlightHours) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Show loading
            const resultsDiv = document.getElementById('solar-results');
            const contentDiv = document.getElementById('results-content');
            resultsDiv.classList.remove('hidden');
            contentDiv.innerHTML = '<div class="loading"><div class="spinner"></div><p>Calculating...</p></div>';
            
            // Simulate calculation delay
            setTimeout(() => {
                // Solar calculation logic
                const panelEfficiency = 0.20; // 20% efficiency
                const panelSize = 17.5; // sq ft per panel
                const panels = Math.floor(roofArea / panelSize);
                const systemSize = panels * 0.4; // kW per panel
                const dailyProduction = systemSize * sunlightHours * panelEfficiency;
                const annualProduction = dailyProduction * 365;
                const annualSavings = annualProduction * electricityCost;
                const systemCost = systemSize * 3000; // $3 per watt
                const paybackPeriod = systemCost / annualSavings;
                
                contentDiv.innerHTML = `
                    <div class="info-grid">
                        <div class="info-card">
                            <h4>System Size</h4>
                            <p><strong>${systemSize.toFixed(1)} kW</strong><br>
                            ${panels} panels on ${roofArea} sq ft roof</p>
                        </div>
                        <div class="info-card">
                            <h4>Annual Production</h4>
                            <p><strong>${annualProduction.toFixed(0)} kWh</strong><br>
                            ${dailyProduction.toFixed(1)} kWh per day</p>
                        </div>
                        <div class="info-card">
                            <h4>Annual Savings</h4>
                            <p><strong>$${annualSavings.toFixed(0)}</strong><br>
                            Based on current electricity rates</p>
                        </div>
                        <div class="info-card">
                            <h4>Payback Period</h4>
                            <p><strong>${paybackPeriod.toFixed(1)} years</strong><br>
                            System cost: $${systemCost.toFixed(0)}</p>
                        </div>
                    </div>
                    <p><strong>Note:</strong> These are estimates. Actual results may vary based on location, shading, and system efficiency.</p>
                `;
            }, 1500);
        }

        // Action functions
        function downloadSolarGuide() {
            alert('Solar Energy Guide download started! (This would trigger a real download)');
        }

        function scheduleConsultation() {
            alert('Redirecting to consultation booking... (This would open a booking system)');
        }

        function viewCaseStudies() {
            alert('Opening case studies... (This would show real case studies)');
        }

        function showUpgradeOptions() {
            window.location.href = 'members-section.html#subscription-tiers';
        }

        function manageSubscription() {
            window.location.href = 'members-section.html';
        }

        // API call function (if needed)
        async function apiCall(endpoint, options = {}) {
            const url = `${API_BASE_URL}${endpoint}`;
            const defaultOptions = {
                headers: {
                    'Content-Type': 'application/json',
                },
            };
            
            const response = await fetch(url, { ...defaultOptions, ...options });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({ error: 'Network error' }));
                throw new Error(errorData.error || `HTTP ${response.status}`);
            }
            
            return await response.json();
        }
    </script>
</body>
</html>
